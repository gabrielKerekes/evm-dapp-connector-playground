(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4833:(e,r,t)=>{Promise.resolve().then(t.bind(t,9))},9:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>E});var a=t(5155),s=t(582),n=t(2115);let l=["function name() public view returns (string)","function symbol() public view returns (string)","function decimals() public view returns (uint8)","function totalSupply() public view returns (uint256)","function approve(address _spender, uint256 _value) public returns (bool success)"],c={ethereum:{chainId:"0x1",rpcUrls:["https://eth.llamarpc.com"],chainName:"Ethereum",nativeCurrency:{name:"ETH",decimals:18,symbol:"ETH"},blockExplorerUrls:["https://etherescan.io"],iconUrls:[],usdcAddress:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},arbitrumOne:{chainId:"0xa4b1",rpcUrls:["https://arbitrum.llamarpc.com"],chainName:"Arbitrum One",nativeCurrency:{name:"ETH",decimals:18,symbol:"ETH"},blockExplorerUrls:["https://arbiscan.io"],iconUrls:[],usdcAddress:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831"},mode:{chainId:"0x868b",rpcUrls:["https://1rpc.io/mode"],chainName:"Mode",nativeCurrency:{name:"ETH",decimals:18,symbol:"ETH"},blockExplorerUrls:["https://explorer.mode.network"],iconUrls:[],usdcAddress:"0xd988097fb8612cc24eeC14542bC03424c656005f"},bahamut:{chainId:"0x142d",rpcUrls:["https://rpc1.bahamut.io"],chainName:"Bahamut",nativeCurrency:{name:"ETH",decimals:18,symbol:"FTN"},blockExplorerUrls:["https://www.ftnscan.com"],iconUrls:[],usdcAddress:"0x4237e0A5b55233D5B6D6d1D9BF421723954130D8"},mantle:{chainId:"0x1388",rpcUrls:["https://rpc.mantle.xyz"],chainName:"Mantle",nativeCurrency:{name:"MNT",decimals:18,symbol:"MNT"},blockExplorerUrls:["https://explorer.mantle.xyz"],iconUrls:[],usdcAddress:"0x09Bc4E0D864854c6aFB6eB9A9cdF58aC190D0dF9"}},o=e=>{let{label:r,onClick:t,disabled:s}=e;return(0,a.jsx)("button",{className:"bg-blue-500 text-white p-2 rounded-md ".concat(s?"opacity-50 cursor-not-allowed":""),onClick:t,disabled:s,children:r})};function d(e){let{label:r,value:t,onChange:s}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-900",children:r}),(0,a.jsx)("input",{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",type:"text",value:t,onChange:e=>s(e.target.value)})]})}function i(e){let{network:r,onChange:t}=e;return(0,a.jsx)("select",{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",onChange:e=>{let r=e.target.value;r in c&&r&&t(c[r])},value:Object.keys(c).find(e=>c[e].chainName===r.chainName),children:Object.keys(c).map(e=>(0,a.jsx)("option",{value:e,children:c[e].chainName},e))})}let u=async(e,r,t)=>{if(!r)return t({type:"error",message:"Provider not found"}),!1;try{return await r.send("wallet_addEthereumChain",[e]),t({type:"success",message:"Added network: ".concat(e.chainName)}),!0}catch(e){var a;if(4001===e.code||(null===(a=e.message)||void 0===a?void 0:a.includes("user rejected")))return t({type:"error",message:"Network switch rejected by user"}),!1;return t({type:"error",message:"Failed to add network: ".concat(e.message)}),!1}},h=e=>{let{network:r,provider:t,addLog:s,onSuccess:l}=e,[c,h]=(0,n.useState)(r);(0,n.useEffect)(()=>{h(r)},[r]);let m=async()=>{await u(c,t,s)&&l&&l(c)};return(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-bold",children:"Add network"}),(0,a.jsx)(i,{network:c,onChange:h}),(0,a.jsx)(d,{label:"Chain ID",value:c.chainId,onChange:e=>h({...c,chainId:e})}),(0,a.jsx)(d,{label:"Chain Name",value:c.chainName,onChange:e=>h({...c,chainName:e})}),(0,a.jsx)(d,{label:"RPC URL",value:c.rpcUrls[0],onChange:e=>h({...c,rpcUrls:[e]})}),(0,a.jsx)(d,{label:"Block Explorer URL",value:c.blockExplorerUrls[0],onChange:e=>h({...c,blockExplorerUrls:[e]})}),(0,a.jsx)(o,{label:"Add Network",onClick:m,disabled:!t})]})},m=async(e,r,t)=>{if(!r)return t({type:"error",message:"Provider not found"}),!1;try{return await r.send("wallet_switchEthereumChain",[{chainId:e.chainId}]),t({type:"success",message:"Switched to network: ".concat(e.chainName)}),!0}catch(s){var a;if((null==s?void 0:null===(a=s.error)||void 0===a?void 0:a.code)===4902)return t({type:"info",message:"Network not found, attempting to add network"}),await u(e,r,t),!0;if("ACTION_REJECTED"===s.code)return t({type:"error",message:"Network switch rejected by user"}),!1;return t({type:"error",message:"Failed to switch network: ".concat(s.message)}),!1}},x=e=>{let{network:r,onSuccess:t,provider:s,addLog:n}=e,l=async e=>{await m(e,s,n)&&t&&t(e)};return(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-bold",children:"Switch Network"}),(0,a.jsx)(i,{network:r,onChange:l,className:"mb-4"})]})};function g(e){let{onClose:r,network:t,provider:s,addLog:n,onSwitchNetwork:l,onAddNetwork:c}=e;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg w-96 flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-bold",children:"Network actions"}),(0,a.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:"âœ•"})]}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(x,{network:t,provider:s,addLog:n,onSuccess:e=>l(e)})}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(h,{network:t,provider:s,addLog:n,onSuccess:e=>c(e)})})]})})}function p(){return(0,a.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})})}function b(){return(0,a.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,a.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})}function f(){return(0,a.jsxs)("svg",{className:"w-6 h-6",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M0 16C0 7.16344 7.16344 0 16 0C24.8366 0 32 7.16344 32 16C32 24.8366 24.8366 32 16 32C7.16344 32 0 24.8366 0 16Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 30.5C22.77 30.5 28.4502 25.8074 30 19.48H25.1761C23.7774 23.2083 20.1966 25.86 16 25.86C11.8034 25.86 8.2226 23.2083 6.82392 19.48H2C3.54984 25.8074 9.23001 30.5 16 30.5ZM16 1.5C22.77 1.5 28.4502 6.19261 30 12.52H25.1761C23.7774 8.79173 20.1966 6.14 16 6.14C11.8034 6.14 8.2226 8.79173 6.82392 12.52H2C3.54984 6.19261 9.23001 1.5 16 1.5ZM13.4624 12.52C12.9528 12.52 12.5397 12.9355 12.5397 13.448V18.552C12.5397 19.0645 12.9528 19.48 13.4624 19.48H18.5376C19.0472 19.48 19.4603 19.0645 19.4603 18.552V13.448C19.4603 12.9355 19.0472 12.52 18.5376 12.52H13.4624Z",fill:"white"})]})}var v=t(2732),y=t(8982),w=t(2316);let j=e=>{let{network:r,provider:t,address:s,addLog:c,setResult:i}=e,[u,h]=(0,n.useState)("123"),[m,x]=(0,n.useState)(r.usdcAddress),[g,p]=(0,n.useState)("");(0,n.useEffect)(()=>{x(r.usdcAddress)},[r]);let b=async()=>{var e,a;if(p(""),!t){c({type:"error",message:"Provider not found"});return}try{let a=new v.cP(t,s),n=new y.NZ(m,l,a),o=await n.decimals(),d=w.XS(u,o);c({type:"approve",message:"amount: ".concat(d)});let h=await n.approve(s,d);c({type:"approve",message:"result: ".concat(h)});let x=(null===(e=r.blockExplorerUrls)||void 0===e?void 0:e.length)>0?"".concat(r.blockExplorerUrls[0],"/tx/").concat(h.hash):"N/A";p(x),i("Transaction submitted")}catch(e){4001===e.code||(null===(a=e.message)||void 0===a?void 0:a.includes("user rejected"))?(c({type:"error",message:"Transaction rejected by user"}),i("Transaction rejected by user")):(c({type:"error",message:"Approval failed: ".concat(e.message)}),i("Approval failed: ".concat(e.message)))}};return(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-bold",children:"Approve Token"}),(0,a.jsx)(d,{label:"Approval Amount",value:u,onChange:h}),(0,a.jsx)(d,{label:"Token",value:m,onChange:x}),(0,a.jsx)(o,{label:"Approve",onClick:()=>b(),disabled:!t}),g&&(0,a.jsx)("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline truncate inline-block max-w-full",children:"View transaction on explorer"})]})},N=e=>{let{logs:r,title:t="Logs",className:s=""}=e,l=(0,n.useRef)(null);return(0,n.useEffect)(()=>{l.current&&(l.current.scrollTop=l.current.scrollHeight)},[r]),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg w-full ".concat(s),children:[(0,a.jsx)("h3",{className:"text-lg font-bold",children:t}),(0,a.jsx)("div",{ref:l,className:"flex flex-col gap-2 mt-2 h-64 overflow-y-auto border border-gray-200 rounded p-2",children:r.map((e,r)=>(0,a.jsxs)("div",{children:[e.type,": ",e.message," ",e.chainName?"(".concat(e.chainName,")"):""]},r))})]})},C=e=>{let{provider:r,addLog:t,setResult:s}=e,n=async()=>{if(!r){t({type:"error",message:"Provider not found"});return}try{let e=await r.send("eth_requestAccounts",[]);t({type:"accounts",message:"Accounts: ".concat(e.join(", "))}),s(e)}catch(e){t({type:"error",message:"Failed to get accounts: ".concat(e.message)}),s("Failed to get accounts: ".concat(e.message))}};return(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-bold",children:"Get Accounts"}),(0,a.jsx)(o,{label:"Get Accounts",onClick:()=>n(),disabled:!r})]})},k=()=>window.ethereum;function E(){let[e,r]=(0,n.useState)(c.ethereum),[t,l]=(0,n.useState)(!1),[d,i]=(0,n.useState)(null),[u,m]=(0,n.useState)([]),[v,y]=(0,n.useState)(""),[w,E]=(0,n.useState)(null),A=e=>{let{type:r,message:t}=e;console.log("Log:",{type:r,message:t}),m(e=>[...e,{type:r,message:t}])},U=e=>{A({type:"event: chainChanged",message:e})},S=e=>{A({type:"event: accountsChanged",message:e})},H=e=>{A({type:"event: disconnect",message:e})},L=e=>{A({type:"event: connect",message:e})};(0,n.useEffect)(()=>{let e=k();e&&E(new s.k(e))},[e]);let T=async()=>{let e=k();e&&(e.removeListener("chainChanged",U),e.removeListener("accountsChanged",S),e.removeListener("disconnect",H),e.removeListener("connect",L)),y((await e.enable())[0]),e.on("chainChanged",U),e.on("accountsChanged",S),e.on("disconnect",H),e.on("connect",L),i("Connected"),E(new s.k(e))};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"min-h-screen grid grid-rows-[auto_1fr_auto]",children:[(0,a.jsxs)("header",{className:"row-start-1 w-full flex justify-between items-center gap-4 p-4 bg-gray-100",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"NuFi EVM dapp connector playground"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)(o,{label:"Network: ".concat(e.chainName," (").concat(e.chainId,")"),onClick:()=>l(!0)}),(0,a.jsx)(o,{label:v?"Connected: ".concat(v.slice(0,6),"...").concat(v.slice(-4)):"Connect",onClick:()=>T()})]})]}),t&&(0,a.jsx)(g,{onClose:()=>l(!1),network:e,provider:w,addLog:A,onSwitchNetwork:e=>{r(e),l(!1)},onAddNetwork:e=>{r(e),l(!1)}}),(0,a.jsxs)("main",{className:"flex flex-col gap-8 items-center sm:items-start p-8 bg-white",children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4 w-full",children:[(0,a.jsx)(x,{network:e,provider:w,addLog:A,onSuccess:r}),(0,a.jsx)(h,{network:e,provider:w,addLog:A,onSuccess:r}),(0,a.jsx)(C,{provider:w,addLog:A,setResult:i}),(0,a.jsx)(j,{network:e,provider:w,address:v,addLog:A,setResult:i})]}),(0,a.jsx)(N,{logs:u}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg w-full",children:[(0,a.jsx)("h3",{className:"text-lg font-bold",children:"Result"}),(0,a.jsx)("pre",{className:"mt-2",children:JSON.stringify(d,null,2)})]})]}),(0,a.jsxs)("footer",{className:"flex gap-6 flex-wrap items-center justify-center p-4 bg-gray-100",children:[(0,a.jsx)("a",{href:"https://nu.fi",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-gray-900",children:(0,a.jsx)(f,{})}),(0,a.jsx)("a",{href:"#",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-gray-900",children:(0,a.jsx)(p,{})}),(0,a.jsx)("a",{href:"https://x.com/nufiwallet",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-gray-900",children:(0,a.jsx)(b,{})})]})]})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[771,441,517,358],()=>r(4833)),_N_E=e.O()}]);